<!-- Mobile Header -->
<div class="mobile-header">
    <button class="mobile-menu-btn" onclick="toggleSidebar()">
        <ion-icon name="menu-outline"></ion-icon>
    </button>
    <span style="font-weight: 700; font-size: 1.25rem;">
        {% if active_page == 'admin' %}Admin Dashboard{% else %}Bonniface{% endif %}
    </span>
    <div class="user-profile">
        {% if active_page != 'admin' %}
        <img id="mobileAvatar" src="{{ url_for('static', filename='img/boni_avatar.jpg') }}" alt="Avatar"
            class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%;">
        {% else %}
        <div style="width: 32px;"></div>
        {% endif %}
    </div>
</div>

<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <a href="{{ url_for('home') }}" class="logo-container">
            <img src="{{ url_for('static', filename='img/boni_avatar.jpg') }}" alt="Logo" class="logo-img">
            <span class="logo-text">{% if active_page == 'admin' %}Bonniface|Admin{% else %}Bonniface{% endif %}</span>
        </a>
    </div>

    <nav class="sidebar-nav">
        {% if active_page == 'admin' %}
        <div class="nav-item active" onclick="switchTab('overview', this)" style="cursor:pointer;">
            <ion-icon name="grid-outline"></ion-icon>
            <span>Overview</span>
        </div>
        <div class="nav-item" onclick="switchTab('messages', this)" style="cursor:pointer;">
            <ion-icon name="chatbubbles-outline"></ion-icon>
            <span>Messages</span>
            <span class="badge-count"
                style="background:#ef4444; color:white; font-size:0.7rem; padding:0.1rem 0.4rem; border-radius:1rem; margin-left:auto;">3</span>
        </div>
        <div class="nav-item" onclick="switchTab('files', this)" style="cursor:pointer;">
            <ion-icon name="folder-open-outline"></ion-icon>
            <span>Files</span>
        </div>
        <div class="nav-item" onclick="switchTab('notifications', this)" style="cursor:pointer;">
            <ion-icon name="notifications-outline"></ion-icon>
            <span>Notifications</span>
            <span class="badge-count"
                style="background:#ef4444; color:white; font-size:0.7rem; padding:0.1rem 0.4rem; border-radius:1rem; margin-left:auto;">5</span>
        </div>
        <div class="nav-item" onclick="switchTab('settings', this)" style="cursor:pointer;">
            <ion-icon name="settings-outline"></ion-icon>
            <span>Settings</span>
        </div>

        <div class="nav-divider" style="height: 1px; background: rgba(255,255,255,0.1); margin: 1.5rem 1rem;"></div>
        <a href="{{ url_for('dashboard') }}" class="nav-item" style="color: #60a5fa;">
            <ion-icon name="person-outline"></ion-icon>
            <span>User View</span>
        </a>
        {% else %}
        <a href="{{ url_for('dashboard') }}" class="nav-item {% if active_page == 'dashboard' %}active{% endif %}">
            <ion-icon name="grid-outline"></ion-icon>
            <span>Dashboard</span>
        </a>
        <a href="{{ url_for('messages') }}" class="nav-item {% if active_page == 'messages' %}active{% endif %}">
            <ion-icon name="chatbubbles-outline"></ion-icon>
            <span>Messages</span>
        </a>
        <a href="{{ url_for('start_project') }}"
            class="nav-item {% if active_page == 'start-project' %}active{% endif %}">
            <ion-icon name="rocket-outline"></ion-icon>
            <span>Start Project</span>
        </a>
        <a href="{{ url_for('billings') }}" class="nav-item {% if active_page == 'billings' %}active{% endif %}">
            <ion-icon name="card-outline"></ion-icon>
            <span>Billings</span>
        </a>
        <a href="{{ url_for('settings') }}" class="nav-item {% if active_page == 'settings' %}active{% endif %}">
            <ion-icon name="settings-outline"></ion-icon>
            <span>Settings</span>
        </a>

        {% if session.get('admin_logged_in') %}
        <div class="nav-divider" style="height: 1px; background: rgba(255,255,255,0.1); margin: 1.5rem 1rem;"></div>
        <a href="{{ url_for('admin_dashboard') }}"
            class="nav-item admin-link {% if active_page == 'admin' %}active{% endif %}" style="color: #60a5fa;">
            <ion-icon name="shield-checkmark-outline"></ion-icon>
            <span>Admin Panel</span>
        </a>
        {% endif %}
        {% endif %}
    </nav>

    <div class="sidebar-footer">
        {% if session.get('admin_logged_in') and active_page == 'admin' %}
        <form action="{{ url_for('logout') }}" method="POST" style="margin:0; width: 100%;">
            <button type="submit" class="nav-item logout-btn"
                style="background:transparent; border:none; width:100%; text-align:left; cursor:pointer; color: #ef4444;">
                <ion-icon name="log-out-outline"></ion-icon>
                <span>Logout Admin</span>
            </button>
        </form>
        {% else %}
        <a onclick="supabaseClient.signOut()" class="nav-item logout-btn" style="cursor:pointer; color: #ef4444;">
            <ion-icon name="log-out-outline"></ion-icon>
            <span>Logout</span>
        </a>
        {% endif %}
    </div>
</aside>